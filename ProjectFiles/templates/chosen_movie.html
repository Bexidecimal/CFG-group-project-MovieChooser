{% extends 'base.html' %}

{% block title %}Links{% endblock %}

{% block page_css %}
    <link rel="stylesheet" href="/static/css/chosen_movie.css">
{% endblock %}

{% block content %}
    <!-- Movie Chooser Title Section -->
    <div class="container py-5 text-center bg-light">
        <h1 class="display-3">{{ movie.title }}</h1>
        <h3> {{movie.tagline }}</h3>
    </div>



<div class="container">

    <div class="row">
        <div class="col">
            <h2>Overview</h2>
            {{ movie.overview }}
            <div class="mt-4 {% if movie.vote_average > 4 %} text-success {% elif movie.vote_average < 3 %} text-danger {% else %} text-warning {% endif %}">
                <p>The average rating for this movie is {{ movie.vote_average }}</p>
            </div>
                {% for actor in actors.cast %}
                {% if loop.index < 11 %}
                <div>
                    <a href="{{ url_for('actor', person_id=actor.id) }}">{{ actor.name }}</a>
                </div>
                {% endif %}
                {% endfor %}
        </div>

        <div class="col text-end">
            <img class="image_border" src="https://image.tmdb.org/t/p/original{{ movie.poster_path }}" width="400" height="500">
        </div>

    </div>
</div>

<div class="accordion accordion-flush my-5 accordian_container" id="accordionExample">
  <div class="accordion-item">
    <h2 class="accordion-header" id="headingOne">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
        Reviews
      </button>
    </h2>
    <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
      <div class="accordion-body">
                <div class="container review_container mt-5">
                    <div class="row ">
                    </div>
                        <div class="row">
                              {% for review in reviews.results %}
                            <div class="col-12">
                                <p><span class="review_name">Review by:</span> {{ review.author }}</p>
                                <p>{{ review.content|safe }}</p>
                                <p class="review_rating"> Reviewer rating: {{ review.author_details.rating }} </p>
                            </div>
                            {% endfor %}
                        </div>
                </div>
      </div>
    </div>
  </div>
</div>



{% endblock %}